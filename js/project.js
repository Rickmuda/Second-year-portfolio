var projectsData = [
    { 
        project_id: 1,
        project_name: "SPIDERVERSE FORUM", 
        project_img: "https://cdn.discordapp.com/attachments/1248389984474370069/1248390302918770718/spiderverse-forum.png?ex=66637d92&is=66622c12&hm=ebe8c238c4e6f0d6377412375ff818079bcf499575ca9e00715a1160673adbe5&", 
        project_url: "../html/project-explanations/school-coding-projects/2022-2023/spiderverse-forum.html",
        languages: ["php", "css"] 
    },
    { 
        project_id: 2,
        project_name: "ANNOYING WEBPAGE", 
        project_img: "https://cdn.discordapp.com/attachments/1248389984474370069/1248390488210411530/irritante-webpagina.png?ex=66637dbe&is=66622c3e&hm=195b9316732e64fe23ac68666299b62f47a35542446e3de7e6280ceeeb4c5e0c&", 
        project_url: "../html/project-explanations/school-coding-projects/2022-2023/irritante-webpagina.html",
        languages: ["css", "js", "html"] 
    },
    { 
        project_id: 3,
        project_name: "WHACK A MOM", 
        project_img: "https://cdn.discordapp.com/attachments/1248389984474370069/1248390489443668008/whack-a-mom.png?ex=66637dbe&is=66622c3e&hm=ffed9a33b4b9880f4872a3edcb11cf09138282b848e37b055ddef759ae70485c&", 
        project_url: "../html/project-explanations/school-coding-projects/2022-2023/whack-a-mom.html",
        languages: ["js", "css", "html"] 
    },
    { 
        project_id: 4,
        project_name: "ONE PAGER", 
        project_img: "https://cdn.discordapp.com/attachments/1248389984474370069/1248390488676110366/one-pager.png?ex=66637dbe&is=66622c3e&hm=8600b4d9e21c7846c3fdab250ed9d7d6a4a26c042f6cbb90bbc24694b50d92ce&", 
        project_url: "../html/project-explanations/school-coding-projects/2022-2023/one-pager.html",
        languages: ["html", "css"] 
    },
    { 
        project_id: 5,
        project_name: "UNDERTALE SUDOKU", 
        project_img: "https://cdn.discordapp.com/attachments/1248389984474370069/1248390546330746953/undertale-sudoku.png?ex=66637dcc&is=66622c4c&hm=3210489eedb3b559e312fe51b49a41a69d558e93c1e2b2ee7abbee0ba9042510&", 
        project_url: "../html/project-explanations/other-coding-projects/2022-2023/undertale-sudoku.html",
        languages: ["js", "css", "html"] 
    },
    { 
        project_id: 6,
        project_name: "GYM CHECKLIST", 
        project_img: "https://cdn.discordapp.com/attachments/1248389984474370069/1248390562743058432/gym-list.png?ex=66637dd0&is=66622c50&hm=4489fa9a64eaba6ceb8b4b83265472fd711b060b3c825a811fb2d9a1f6770b89&", 
        project_url: "../html/project-explanations/other-coding-projects/2023-2024/gym-list.html",
        languages: ["html", "css", "js"] 
    },
    { 
        project_id: 7,
        project_name: "WEATHER APP", 
        project_img: "https://cdn.discordapp.com/attachments/1248389984474370069/1248401276593770587/underconstruction.png?ex=666387ca&is=6662364a&hm=f2247f39c5df259859d0692867ee4c6437d52f126b609fa304b4d1230fc80c65&", 
        project_url: "",
        languages: ["react", "css", "js"] 
    },
    { 
        project_id: 8,
        project_name: "LONG VIDEO THEATER", 
        project_img: "https://cdn.discordapp.com/attachments/1248389984474370069/1248401276593770587/underconstruction.png?ex=666387ca&is=6662364a&hm=f2247f39c5df259859d0692867ee4c6437d52f126b609fa304b4d1230fc80c65&", 
        project_url: "",
        languages: ["react", "css", "js"] 
    },

    {
        project_id: 9,
        project_name: "ENGLISH QUIZ", 
        project_img: "https://media.discordapp.net/attachments/1248389984474370069/1248390487795306647/english-quiz.png?ex=66637dbe&is=66622c3e&hm=e9e6d02b2f2fa2eb3af94a26ab0d3386836a312d8eb9751bb8c5d107fb57e0d2&=&format=webp&quality=lossless&width=705&height=391", 
        project_url: "../html/project-explanations/school-coding-projects/2022-2023/english-quiz.html",	
        languages: ["html", "css", "js"] 
    },

    {
        project_id: 10,
        project_name: "UNDERTALE FORUM", 
        project_img: "https://media.discordapp.net/attachments/1248389984474370069/1248390512893759518/undertale-laravel.png?ex=66637dc4&is=66622c44&hm=ccac757ccc1288d48f22f8adfb8590274484d96a4b6d35351910ee200e2f89a6&=&format=webp&quality=lossless&width=705&height=389", 
        project_url: "",	
        languages: ["php", "css",] 
    },

    {
        project_id: 11,
        project_name: "TO DO LIST", 
        project_img: "https://media.discordapp.net/attachments/1248389984474370069/1248390512457683005/todolist.png?ex=66637dc4&is=66622c44&hm=0a0f2cb67afda5d0afabbf996db3f8e298171664e42a6a6ae920eb6fd49df530&=&format=webp&quality=lossless&width=705&height=388", 
        project_url: "",	
        languages: ["js", "css", "html"] 
    },

    {
        project_id: 12,
        project_name: "WEBSHOP HET COOLE PLAATJE", 
        project_img: "https://cdn.discordapp.com/attachments/1248389984474370069/1248390489036816444/webshop.png?ex=66637dbe&is=66622c3e&hm=d48b7ae79bc9d2060ee7db528477edb2c6b11f43a0a9bbf1e00bea6f624abad8&", 
        project_url: "",	
        languages: ["php", "css", "js"] 
    },

];

function generateProjectColumns() {
    var projectsRow = document.getElementById('projects-row');
    projectsRow.innerHTML = ''; // Clear existing projects

    var filteredProjects = projectsData.filter(project => {
        // Filter projects based on selected languages
        var selectedLanguages = [];
        document.querySelectorAll('.filter-checkbox:checked').forEach(function(checked) {
            selectedLanguages.push(checked.value);
        });
        return selectedLanguages.length === 0 || project.languages.some(lang => selectedLanguages.includes(lang));
    });

    var projectsInRow = 3; // Define the number of projects in each row
    var numRows = Math.ceil(filteredProjects.length / projectsInRow); // Calculate the number of rows needed

    for (var i = 0; i < numRows; i++) {
        var row = document.createElement('div');
        row.className = 'row'; // Create a new row for each iteration

        for (var j = 0; j < projectsInRow; j++) {
            var index = i * projectsInRow + j;
            if (index < filteredProjects.length) {
                var project = filteredProjects[index];
        
                var projectColumn = document.createElement('div');
                projectColumn.className = 'column';
                projectColumn.dataset.languages = project.languages.join(','); // Store project languages as data attribute
        
                var projectName = document.createElement('h4');
                projectName.textContent = project.project_name;
        
                var projectImage = document.createElement('img');
                projectImage.src = project.project_img;
                projectImage.alt = project.project_name;
                projectImage.style.width = '80%'; // Ensure images fill their parent container
        
                // Use a closure to capture the current value of project
                (function(project) {
                    projectImage.onclick = function() {
                        window.location.href = project.project_url;
                    };
                })(project);
        
                projectColumn.appendChild(projectName); // Append project name
                projectColumn.appendChild(projectImage); // Append project image
                row.appendChild(projectColumn);
            }
        }
        projectsRow.appendChild(row); // Append the row to the projects container
    }
}

// Call the function to generate project columns
generateProjectColumns();

// Function to update project visibility based on selected languages
function updateProjectVisibility() {
    var selectedLanguages = [];
    document.querySelectorAll('.filter-checkbox:checked').forEach(function(checked) {
        selectedLanguages.push(checked.value);
    });

    var projects = document.querySelectorAll('.column');
    var visibleProjects = 0; // Counter for visible projects
    var currentRow = null; // Variable to hold the current row

    projects.forEach(function(project) {
        var languages = project.dataset.languages.split(','); // Get languages as array
        var isVisible = selectedLanguages.every(lang => languages.includes(lang));

        if (isVisible) {
            // Show the project
            project.style.display = 'block';
            visibleProjects++;

            // Check if a new row needs to be started
            if ((visibleProjects - 1) % 3 === 0) {
                // Create a new row
                currentRow = document.createElement('div');
                currentRow.className = 'row';
                project.parentNode.insertBefore(currentRow, project);
            }

            // Append the project to the current row
            currentRow.appendChild(project);
        } else {
            // Hide the project
            project.style.display = 'none';
        }
    });
}

// Call the function to update project visibility initially
document.addEventListener('DOMContentLoaded', function () {
    updateProjectVisibility();
});